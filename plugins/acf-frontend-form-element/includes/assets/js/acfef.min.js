var modalLevel=1,narrowfy=0;
(function(c){function w(a,b){a=a+"-"+modalLevel;var d=9+modalLevel,e=c("#modal_"+a);e.length?e.removeClass("hide").addClass("show"):(e=c('<div id="modal_'+a+'" class="modal edit-modal show" data-clear="1"><div class="modal-content" style="margin:'+d+"% auto;width:"+b+'px;max-width:80%"><div class="modal-inner"><span class="acf-icon -cancel close"></span><div class="content-container"><div class="loading"><span class="acf-loading"></span></div></div></div></div></div>'),c("body").append(e));return e}
function v(a,b){var d={action:"acfef/fields/relationship/add_form",field_key:a.data("key"),parent_form:a.parents("form").attr("id"),form_action:b};c.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(d),type:"post",dataType:"html",success:k})}function k(a){container.find(".content-container").html(a);acf.do_action("append",container)}c("body").on("input","input.image-preview",function(a){var b=new FileReader,d=c(this);b.onload=function(){d.parents(".hide-if-value").addClass("acfef-hidden").siblings(".show-if-value").addClass("show").find("img").attr("src",
b.result)};imagePreview=!0;b.readAsDataURL(a.target.files[0])});c("body").on("click","a[data-name=remove]",function(a){c(this).parents(".show-if-value").removeClass("show").siblings(".hide-if-value").removeClass("acfef-hidden").find("input.image-preview").val("")});c(document).on("elementor/popup/show",function(a,b,d){acf.do_action("append",c("#elementor-popup-modal-"+b))});c("body").on("input",".pa-custom-name input",function(a){c(this).closest(".acf-fields").siblings(".acf-fc-layout-handle").find(".attr_name").text(c(this).val())});
c("body").on("change",".posts-select",function(a){a=c(this);var b=a.parents(".acfef-form-posts").siblings("form");a.parents(".acfef-form-posts").append('<span class="acf-loading"></span>');var d=b.data("widget");a=b.find("input[name=_acf_form]").val();a={action:"acfef/forms/change_form",draft:c(this).val(),form_data:a};c.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(a),type:"post",dataType:"json",cache:!1,success:function(e){e.data.reload_form&&(c("body, html").animate({scrollTop:b.offset().top},
"slow"),b.siblings(".acfef-form-posts").remove(),b.replaceWith(e.data.reload_form),acf.do_action("append",c(".elementor-element-"+d)),c(".acf-loading").remove())}})});c("body").on("click","span.close-msg",function(a){c(this).parents(".acfef-message").remove()});c("body").on("input click",".acf-fields,.acf-form-submit",function(a){c(".acfef-message").remove()});c("body").on("click","a.add-rel-post",function(){$el=c(this).parents(".acf-field-relationship");container=w($el.data("key"),$el.data("form_width")-
narrowfy);modalLevel++;narrowfy+=20;v($el,"add_post")});c("body").on("mouseenter",".choices a.edit-rel-post",function(a){a=c(this).parents(".acf-rel-item");a.hasClass("disabled")||a.addClass("disabled temporary")});c("body").on("mouseleave",".choices a.edit-rel-post",function(a){a=c(this).parents(".acf-rel-item");a.hasClass("temporary")&&a.removeClass("disabled temporary")});c("body").on("click","a.edit-rel-post",function(a){a.preventDefault();$el=c(this).parents(".acf-field-relationship");container=
w($el.data("key"),$el.data("form_width")-narrowfy);a=c(this).parents(".acf-rel-item").data("id");modalLevel++;narrowfy+=20;v($el,a)});c(".post-slug-field input").on("input keyup",function(){var a=this.selectionStart,b=c(this).val();c(this).val(b.replace(/[`~!@#$%^&*()|+=?;:..\u2019\u201c'"<>,\u20ac\u00a3\u00a5\u2022\u060c\u066b\u061f\u00bb\u00ab\s\{\}\[\]\\\/]+/gi,"").toLowerCase());this.setSelectionRange(a,a)});c("body").on("click","button.edit-password",function(){c(this).addClass("acfef-hidden").siblings(".pass-strength-result").removeClass("acfef-hidden").parents(".acf-field-password").removeClass("edit_password").addClass("editing_password").next(".acf-field-password").removeClass("edit_password");
c(this).after('<input type="hidden" name="edit_user_password" value="1"/>')});c("body").on("click","button.cancel-edit",function(){c(this).siblings("button.edit-password").removeClass("acfef-hidden").siblings(".pass-strength-result").addClass("acfef-hidden").parents(".acf-field-password").addClass("edit_password").removeClass("editing_password").next(".acf-field-password").addClass("edit_password");c(this).parents("acf-input-wrap").siblings("acf-notice");c(this).siblings("input[name=edit_user_password]").remove()});
c("body").on("click",".modal .close",function(a){a=c(this).parents(".modal");1==a.data("clear")&&(a.remove(),modalLevel--,narrowfy-=20)});acf.add_filter("validation_complete",function(a,b){a.errors&&(c(".acf-loading").remove(),b.find("input[type=submit]").removeClass("disabled"));return a});c("body").on("click","form.acfef-form input[type=submit]",function(a){$form=c(this).parents("form");$form.find("input[name=_acf_status]").val(c(this).data("state"));c(this).hasClass("disabled")||c(this).after('<span class="acf-loading"></span>')});
c("body").on("submit","form.acfef-form",function(a){a.preventDefault();$form=c(this);$form.find("input[type=submit]").addClass("disabled");args={form:$form,reset:!1,success:function(b){var d=c('input[type="file"]:not([disabled])',b);d.each(function(f,g){0<g.files.length||c(g).prop("disabled",!0)});var e=new FormData(b[0]);e.append("action","acfef/form_submit");d.prop("disabled",!1);acf.lockForm(b);c.ajax({url:acf.get("ajaxurl"),type:"post",data:e,cache:!1,processData:!1,contentType:!1,success:function(f){if(f.success)if(f.data.redirect)window.location=
f.data.redirect;else if(acf.unlockForm(b),successMessage='<div class="acfef-message"><div class="acf-notice -success acf-success-message"><p class="success-msg">'+f.data.update_message+'</p><span class="acfef-dismiss close-msg acf-notice-dismiss acf-icon -cancel small"></span></div></div>',f.data.append){var g=f.data.append;f=f.data.field_key;modalLevel--;narrowfy-=20;"edit"==g.action?(c(".acf-field-relationship div.values").find("span[data-id="+g.id+"]").html(g.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a>'),
c(".acf-field-relationship div.choices").find("span[data-id="+g.id+"]").html(g.text)):(thisRelField=1<modalLevel?c("#modal_"+f+"-"+(modalLevel-1)).find("div[data-key="+f+"]"):c("div[data-key="+f+"]"),thisRelField.find("div.values ul").append('<li><input type="hidden" name="acf['+thisRelField.data("key")+'][]" value="'+g.id+'" /><span data-id="'+g.id+'" class="acf-rel-item">'+g.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a></span></li>'));b.parents(".modal").remove()}else b.find(".acf-loading").remove(),
b.find(".acfef-submit-button").attr("disabled",!1).removeClass("acf-hidden"),f.data.clear_form&&(g=b.data("widget"),b.siblings(".acfef-form-posts").remove(),b.replaceWith(f.data.clear_form),b=c(".elementor-element-"+g).find("form"),acf.do_action("append",c(".elementor-element-"+g)),f.data.saved_message&&(b.find(".save-progress-button").after('<p class="draft-saved">'+f.data.saved_message+"</p>"),setTimeout(function(){c("body").find(".draft-saved").remove()},3E3)),f.data.update_message&&(b.prepend(successMessage),
c("body, html").animate({scrollTop:c(".acfef-message").offset().top-50},"slow")))}})}};acf.validateForm(args)});var p=c("div[data-default]");c.each(p,function(a,b){var d=c(b),e=d.data("default"),f=d.data("dynamic_value"),g=d.find("input[type=text]");if(0<e.length){var l=function(r){var h=[r,"value"];~r.indexOf(":")&&(h=r.split(":"));return h},m=function(r,h){var n=d.siblings("div[data-name="+r+"]"),q=n.find("input");"radio"==n.data("type")&&(q=1==h?n.find("input"):n.find("input:selected"));"select"==
n.data("type")&&(q=n.find("select"));return q},u=function(r,h,n){var q="["+h[0]+"]";""!=n.val()&&(n=n.val(),"text"==h[1]&&(h=d.siblings("div[data-name="+h[0]+"]"),"radio"==h.data("type")&&(sourceInput=h.find(".selected").text()),"select"==h.data("type")&&(sourceInput=h.find(":selected").text()),n=sourceInput),r=r.replace(q,n));return r},t=f;c.each(e,function(r,h){var n=l(h),q=m(n[0],!1);t=u(t,n,q);q=m(n[0],!0);q.on("input",function(){var x=f;c.each(e,function(B,z){var y=l(z),A=m(y[0],!1);x=u(x,y,
A)});g.val(x)})});g.val(t)}});p=acf.Field.extend({type:"upload_images",events:{"click .acf-gallery-add":"onClickAdd","click div.acf-gallery-upload":"onClickUpload","click .acf-gallery-edit":"onClickEdit","click .acf-gallery-remove":"onClickRemove","click .acf-gallery-attachment":"onClickSelect","click .acf-gallery-close":"onClickClose","change .acf-gallery-sort":"onChangeSort","click .acf-gallery-update":"onUpdate",mouseover:"onHover",showField:"render","input .images-preview":"imagesPreview"},actions:{validation_begin:"onValidationBegin",
validation_failure:"onValidationFailure",resize:"onResize"},onValidationBegin:function(){acf.disable(this.$sideData(),this.cid)},onValidationFailure:function(){acf.enable(this.$sideData(),this.cid)},$control:function(){return this.$(".acf-gallery")},$collection:function(){return this.$(".acf-gallery-attachments")},$attachments:function(){return this.$(".acf-gallery-attachment:not(.not-valid)")},$clone:function(){return this.$(".image-preview-clone")},$attachment:function(a){return this.$('.acf-gallery-attachment[data-id="'+
a+'"]')},$active:function(){return this.$(".acf-gallery-attachment.active")},$inValid:function(){return this.$(".acf-gallery-attachment.not-valid")},$main:function(){return this.$(".acf-gallery-main")},$side:function(){return this.$(".acf-gallery-side")},$sideData:function(){return this.$(".acf-gallery-side-data")},isFull:function(){var a=parseInt(this.get("max")),b=this.$attachments().length;return a&&b>=a},getValue:function(){var a=[];this.$attachments().each(function(){a.push(c(this).data("id"))});
return a.length?a:!1},addUnscopedEvents:function(a){this.on("change",".acf-gallery-side",function(b){a.onUpdate(b,c(this))})},addSortable:function(a){this.$collection().sortable({items:".acf-gallery-attachment",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,start:function(b,d){d.placeholder.html(d.item.html());d.placeholder.removeAttr("style")},update:function(b,d){a.$input().trigger("change")}});this.$control().resizable({handles:"s",minHeight:200,stop:function(b,d){acf.update_user_setting("gallery_height",
d.size.height)}})},initialize:function(){this.addUnscopedEvents(this);this.render()},render:function(){var a=this.$(".acf-gallery-sort"),b=this.$(".acf-gallery-add"),d=this.$attachments().length;this.isFull()?b.addClass("disabled"):b.removeClass("disabled");d?a.removeClass("disabled"):a.addClass("disabled");this.resize()},resize:function(){var a=this.$control().width();a=Math.round(a/150);a=Math.min(a,8);this.$control().attr("data-columns",a)},onResize:function(){this.resize()},openSidebar:function(){this.$control().addClass("-open");
var a=this.$control().width()/3;a=parseInt(a);a=Math.max(a,350);this.$(".acf-gallery-side-inner").css({width:a-1});this.$side().animate({width:a-1},250);this.$main().animate({right:a},250)},closeSidebar:function(){this.$control().removeClass("-open");this.$active().removeClass("active");acf.disable(this.$side());var a=this.$(".acf-gallery-side-data");this.$main().animate({right:0},250);this.$side().animate({width:0},250,function(){a.html("")})},onClickAdd:function(a,b){this.$control().css("height",
"400");this.isFull()?this.showNotice({text:acf.__("Maximum selection reached"),type:"warning"}):acf.newMediaPopup({mode:"select",title:acf.__("Add Image to Gallery"),field:this.get("key"),multiple:"add",library:this.get("library"),allowedTypes:this.get("mime_types"),selected:this.val(),select:c.proxy(function(d,e){this.appendAttachment(d,e)},this)})},imagesPreview:function(a,b){var d=this;this.$control().css("height","400");var e=this.$attachments().length,f=this.$control().data("max"),g=a.currentTarget.files;
Object.keys(g).forEach(function(l){if(0<f&&e>=f)return!1;var m=g[l],u=new FileReader;u.onload=function(t){t=d.$clone().clone();t.removeClass("acf-hidden image-preview-clone").addClass("acf-gallery-attachment acf-uploading").find("img").attr("src",u.result);t.appendTo(d.$collection());"application/pdf"==m.type&&t.find(".margin").append('<span class="gi-file-name">'+m.name+"</span>");d.uploadImage(m,t)};e++;u.readAsDataURL(a.target.files[l])});e>=f&&0<f&&this.$("input.images-preview").prop("disabled",
!0)},uploadImage:function(a,b){var d=b.find(".uploads-progress .percent"),e=b.find(".uploads-progress .bar");d.text("33%");e.css("width","33%");var f=this.$el.parents("form").find("input[name=_acf_nonce]").val(),g=this.get("key"),l=new FormData;l.append("action","acf/fields/upload_images/add_attachment");l.append("file",a);l.append("field_key",g);l.append("nonce",f);c.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(l),type:"post",processData:!1,contentType:!1,cache:!1}).done(function(m){m.success?
(d.text("100%"),e.css("width","100%"),m.data.src&&b.find("img").attr("src",m.data.src),b.attr("data-id",m.data.id).find(".acf-gallery-remove").attr("data-id",m.data.id),m=c("<input>").attr({type:"hidden",name:"acf["+g+"][]",value:m.data.id}),b.prepend(m).removeClass("acf-uploading"),setTimeout(function(){b.find(".uploads-progress").remove()},5E3)):(b.find(".uploads-progress").remove(),b.addClass("not-valid").append('<p class="errors">'+m.data+"</p>").find(".margin").append('<p class="upload-fail">x</p>'))})},
onClickUpload:function(a,b){this.isFull()?this.showNotice({text:acf.__("Maximum selection reached: "+this.$control().data("max")),type:"warning"}):this.$inValid()&&(this.$inValid().remove(),this.$("input.images-preview").prop("disabled",!1))},appendAttachment:function(a,b){a=this.validateAttachment(a);if(!this.isFull()&&!this.$attachment(a.id).length){var d=['<div class="acf-gallery-attachment" data-id="'+a.id+'">','<input type="hidden" value="'+a.id+'" name="'+this.getInputName()+'[]">','<div class="margin" title=""><div class="thumbnail"><img src="" alt=""></div><div class="filename"></div></div><div class="actions">',
'<a href="#" class="acf-icon -cancel dark acf-gallery-remove" data-id="'+a.id+'"></a>',"</div></div>"].join("");d=c(d);this.$collection().append(d);if("prepend"===this.get("insert")){var e=this.$attachments().eq(b);e.length&&e.before(d)}this.renderAttachment(a);this.render();this.$input().trigger("change")}},validateAttachment:function(a){a=acf.parseArgs(a,{id:"",url:"",alt:"",title:"",filename:"",type:"image"});if(a.attributes){a=a.attributes;var b=acf.isget(a,"sizes",this.get("preview_size"),"url");
null!==b&&(a.url=b)}return a},renderAttachment:function(a){a=this.validateAttachment(a);var b=this.$attachment(a.id);if("image"==a.type)b.find(".filename").remove();else{var d=acf.isget(a,"image","src");null!==d&&(a.url=d);b.find(".filename").text(a.filename)}a.url||(a.url=acf.get("mimeTypeIcon"),b.addClass("-icon"));b.find("img").attr({src:a.url,alt:a.alt,title:a.title});acf.val(b.find("input"),a.id)},editAttachment:function(a){acf.newMediaPopup({mode:"edit",title:acf.__("Edit Image"),button:acf.__("Update Image"),
attachment:a,field:this.get("key"),select:c.proxy(function(b,d){this.renderAttachment(b)},this)})},onClickEdit:function(a,b){var d=b.data("id");d&&this.editAttachment(d)},removeAttachment:function(a){this.closeSidebar();this.$attachment(a).remove();this.render();this.$input().trigger("change")},onClickRemove:function(a,b){a.preventDefault();a.stopPropagation();var d=b.data("id");d?this.removeAttachment(d):b.parents(".acf-gallery-attachment").remove();d=this.$attachments().length;var e=this.$control().data("max");
d<e&&this.$("input.images-preview").prop("disabled",!1)},selectAttachment:function(a){var b=this.$attachment(a);if(!b.hasClass("active")){var d=this.proxy(function(){this.$side().find(":focus").trigger("blur");this.$active().removeClass("active");b.addClass("active");this.openSidebar();e()}),e=this.proxy(function(){var g={action:"acf/fields/gallery/get_attachment",field_key:this.get("key"),id:a};this.has("xhr")&&this.get("xhr").abort();acf.showLoading(this.$sideData());g=c.ajax({url:acf.get("ajaxurl"),
data:acf.prepareForAjax(g),type:"post",dataType:"html",cache:!1,success:f});this.set("xhr",g)}),f=this.proxy(function(g){if(g){var l=this.$sideData();l.html(g);l.find(".compat-field-acf-form-data").remove();l.find("> table.form-table > tbody").append(l.find("> .compat-attachment-fields > tbody > tr"));acf.doAction("append",l)}});d()}},onClickSelect:function(a,b){var d=b.data("id");d&&this.selectAttachment(d)},onClickClose:function(a,b){this.closeSidebar()},onChangeSort:function(a,b){if(!b.hasClass("disabled")){var d=
b.val();if(d){var e=[];this.$attachments().each(function(){e.push(c(this).data("id"))});var f=this.proxy(function(){var l={action:"acf/fields/gallery/get_sort_order",field_key:this.get("key"),ids:e,sort:d};c.ajax({url:acf.get("ajaxurl"),dataType:"json",type:"post",cache:!1,data:acf.prepareForAjax(l),success:g})}),g=this.proxy(function(l){acf.isAjaxSuccess(l)&&(l.data.reverse(),l.data.map(function(m){this.$collection().prepend(this.$attachment(m))},this))});f()}}},onUpdate:function(a,b){var d=this.$(".acf-gallery-update");
if(!d.hasClass("disabled")){var e=acf.serialize(this.$sideData());d.addClass("disabled");d.before('<i class="acf-loading"></i> ');e.action="acf/fields/gallery/update_attachment";c.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(e),type:"post",dataType:"json",complete:function(){d.removeClass("disabled");d.prev(".acf-loading").remove()}})}},onHover:function(){this.addSortable(this);this.off("mouseover")}});acf.registerFieldType(p);acf.registerConditionForFieldType("hasValue","gallery");acf.registerConditionForFieldType("hasNoValue",
"gallery");acf.registerConditionForFieldType("selectionLessThan","gallery");acf.registerConditionForFieldType("selectionGreaterThan","gallery");p=acf.models.ImageField.extend({type:"upload_image"});acf.registerFieldType(p)})(jQuery);
(function(c,w){var v=acf.Field.extend({type:"related_terms",data:{ftype:"select"},select2:!1,wait:"load",events:{'click a[data-name="add"]':"onClickAdd",'click input[type="radio"]':"onClickRadio"},$control:function(){return this.$(".acf-related-terms-field")},$input:function(){return this.getRelatedPrototype().$input.apply(this,arguments)},getRelatedType:function(){var k=this.get("ftype");"multi_select"==k&&(k="select");return k},getRelatedPrototype:function(){return acf.getFieldType(this.getRelatedType()).prototype},
getValue:function(){return this.getRelatedPrototype().getValue.apply(this,arguments)},setValue:function(){return this.getRelatedPrototype().setValue.apply(this,arguments)},initialize:function(){var k=this.$input();this.inherit(k);this.get("ui")&&(ajaxAction="acf/fields/related_terms/query",this.select2=acf.newSelect2(k,{field:this,ajax:this.get("ajax"),multiple:this.get("multiple"),placeholder:this.get("placeholder"),allowNull:this.get("allow_null"),ajaxAction:ajaxAction}))},onRemove:function(){this.select2&&
this.select2.destroy()},onClickAdd:function(k,p){var a=this,b=!1,d=!1,e=!1,f=!1,g=!1,l=!1,m=function(h){b.loading(!1);b.content(h);d=b.$("form");e=b.$('input[name="term_name"]');f=b.$('select[name="term_parent"]');g=b.$(".acf-submit-button");e.focus();b.on("submit","form",u)},u=function(h,n){h.preventDefault();h.stopImmediatePropagation();if(""===e.val())return e.focus(),!1;acf.startButtonLoading(g);var q={action:"acf/fields/related_terms/add_term",field_key:a.get("key"),taxonomy:a.get("taxonomy"),
term_name:e.val(),term_parent:f.length?f.val():0};c.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(q),type:"post",dataType:"json",success:t})},t=function(h){acf.stopButtonLoading(g);l&&l.remove();acf.isAjaxSuccess(h)?(e.val(""),r(h.data),l=acf.newNotice({type:"success",text:acf.getAjaxMessage(h),target:d,timeout:2E3,dismiss:!1})):l=acf.newNotice({type:"error",text:acf.getAjaxError(h),target:d,timeout:2E3,dismiss:!1});e.focus()},r=function(h){var n=c('<option value="'+h.term_id+'">'+h.term_label+
"</option>");h.term_parent?f.children('option[value="'+h.term_parent+'"]').after(n):f.append(n);acf.getFields({type:"related_terms"}).map(function(q){q.get("taxonomy")==a.get("taxonomy")&&q.appendTerm(h)});a.selectTerm(h.term_id)};(function(){b=acf.newPopup({title:p.attr("title"),loading:!0,width:"300px"});var h={action:"acf/fields/related_terms/add_term",field_key:a.get("key"),taxonomy:a.get("taxonomy")};c.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(h),type:"post",dataType:"html",success:m})})()},
appendTerm:function(k){"select"==this.getRelatedType()?this.appendTermSelect(k):this.appendTermCheckbox(k)},appendTermSelect:function(k){this.select2.addOption({id:k.term_id,text:k.term_label})},appendTermCheckbox:function(k){var p=this.$("[name]:first").attr("name"),a=this.$("ul:first");"checkbox"==this.getRelatedType()&&(p+="[]");p=c(['<li data-id="'+k.term_id+'">',"<label>",'<input type="'+this.get("ftype")+'" value="'+k.term_id+'" name="'+p+'" /> ',"<span>"+k.term_name+"</span>","</label></li>"].join(""));
k.term_parent&&(k=a.find('li[data-id="'+k.term_parent+'"]'),a=k.children("ul"),a.exists()||(a=c('<ul class="children acf-bl"></ul>'),k.append(a)));a.append(p)},selectTerm:function(k){"select"==this.getRelatedType()?this.select2.selectOption(k):this.$('input[value="'+k+'"]').prop("checked",!0).trigger("change")},onClickRadio:function(k,p){var a=p.parent("label"),b=a.hasClass("selected");this.$(".selected").removeClass("selected");a.addClass("selected");this.get("allow_null")&&b&&(a.removeClass("selected"),
p.prop("checked",!1).trigger("change"))}});acf.registerFieldType(v)})(jQuery);acf.add_filter("select2_ajax_data",function(c,w,v,k,p){0!=k&&($field_taxonomy=k.find(".acf-related-terms-field").data("taxonomy"),c.taxonomy=$field_taxonomy);return c});