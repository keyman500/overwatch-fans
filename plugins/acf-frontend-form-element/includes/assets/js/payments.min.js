jQuery(function(g){function r(l,a,c){data={action:"acfef_new_payment",acfef_nonce:acfef_vars.cc_nonce,payment_card:a,payment_data:l};jQuery.post(acfef_vars.ajax_url,data,function(d){d.success?(d=d.data,g(".elementor-element-"+c.data("widget")).find(".acf-form-submit").prepend('<div class="acf-notice acf-success-message payment-success"><p>'+d+"</p></div>").find(".acfef-submit-button").attr("disabled",!1).removeClass("acf-hidden"),c.addClass("acf-hidden")):m(d.data,c)})}function m(l,a){a.find(".card-wrapper").append('<div class="acf-notice acf-error-message -error"><p>'+
l+"</p></div>");a.find(".acf-spinner").css("display","none");a.find("button[type=submit]").attr("disabled",!1).css("display","block")}var v=g('.acfef-payment-total .payment-amount[data-dynamic_value!=""]');g.each(v,function(l,a){var c=jQuery(a),d=c.data("default"),e=c.data("dynamic_value");Number.isInteger(e)&&c.html(eval(e));if(0<e.length){var f=function(p,h){var b=c.parents("form").siblings(".pay-to-post").find("div[data-name="+p+"]"),k=b.find("input");"radio"==b.data("type")&&(k=h?b.find("label.selected").find("input"):
b.find("label").find("input"));"select"==b.data("type")&&(k=h?b.find("option:selected"):b.find("option"));return k},t=[],n=e,w=e;0<d.length&&jQuery.each(d,function(p,h){var b=f(h,!0);n=n.replace("["+h+"]",b.val());b=n.split(b.val());t.push(b[0]);e=b[1]});c.html(eval(n));0<d.length&&jQuery.each(d,function(p,h){var b=f(h,!1);jQuery("body").on("input",b,function(){var k=e=w;jQuery.each(d,function(x,q){b=f(q,!0);k=k.replace("["+q+"]",b.val());var u=e.split("["+q+"]");t.push(u[0]);e=u[1]});c.html(eval(k))})})}});
g(".cc-purchase").submit(function(l){l.preventDefault();var a=g(this),c=g(".elementor-element-"+a.data("widget")).data("settings");c.amount=a.find(".payment-amount").html();a.find("button[type=submit]").attr("disabled",!0).css("display","none");a.find(".acf-spinner").css("display","inline-block");a.find(".acf-error-message").remove();"stripe"==c.payment_processor&&(""==acfef_vars.stripe_spk&&m("Could not connect to Stripe. Please check your API keys.",a),"undefined"!=typeof Stripe&&(Stripe.setPublishableKey(acfef_vars.stripe_spk),
0==a.find("input[name=stripeToken]").length&&Stripe.card.createToken(a,function(e,f){f.error?m(f.error.message,a):r(c,f.id,a)})));if("paypal"==c.payment_processor){card={number:a.find("input.number").val(),name:a.find("input.name").val(),expiry:a.find("input.exp").val(),cvv:a.find("input.cvc").val()};var d=!0;g.each(card,function(e,f){if(""==f)return m("The "+e+" field is required",a),d=!1});d&&r(c,card,a)}})});